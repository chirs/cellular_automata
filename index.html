<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Langtons Ant</title>

  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="verify-v1" content="ES7MT4WW7ZSsA5/BJKdhUjxWnzEkJL8E0UdRHLlL9Yo=" />
  <meta name="description" content="Langton's Ant">

  <link rel="stylesheet" type="text/css" href="style.css" />

  <script type="text/javascript" src="http://www.google.com/jsapi"></script>
  <script type="text/javascript">google.load("jquery", "1.3.2");</script>
  <script type="text/javascript" src="ant.js"></script>


  <script type="text/javascript">
    $(document).ready(function() {
      var intervalID, ant;

      var canvas = document.getElementById("antBoard");
      var ctx = canvas.getContext("2d");


      var translateCoord = function(coord){
        return [coord[0] + 125, coord[1] + 125]
      }

      var fillCoord = function(coord, style){
        var ncoord = translateCoord(coord);
        var x = ncoord[0] * 2 ;
        var y = ncoord[1] * 2 ;
        ctx.fillStyle = style;
        ctx.fillRect(x,y,2,2);
      };

      var antMove = function(){
        var speed = parseInt($("#speed").val());
        speed = speed || 1;

        for (var i=0; i < speed; i++){
          var m = ant.move();
          fillCoord(m.coord, m.color);
        }
      };

      var clearCanvas = function(){
        ctx.clearRect(0,0,canvas.width,canvas.height);
      };


      var play = function(){ 
        intervalID = setInterval(antMove, 1); 
      }
      var pause = function() {clearInterval(intervalID);};



      var start = function(generation) { 
        clearCanvas();
        ant = makeAnt($("#description").val());

        var generation = parseInt($("#generation").val());
        generation = generation || 0;

        for (var i=0; i<generation; i++){
          antMove();
        }

        play();
      };

      
      $("#pause").click(pause);
      $("#play").click(play);
      $("#restart").click(start);


      start();


    });




  </script>

</head>


<body class="home">

<div>
<input id="pause" type="submit" value="pause">
<input id="play" type="submit" value="play">
<input id="description" type="input" value="LLRR">
<input id="generation" type="input" value="0">

<input id="restart" type="submit" value="restart">
</div>

<div>
<label>speed</label><input id="speed" type="input" value="100">
</div>

<canvas id="antBoard" width="500" height="500">
</canvas>


</body>
